<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bantuan</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    html, body {
      height: 100%;
      scroll-behavior: smooth;
    }
    #chat-container {
      scrollbar-width: thin;
      scrollbar-color: #4b5563 #111827;
      position: relative;
    }
    @keyframes dot-blink {
      0%, 80%, 100% { opacity: 0.2; }
      40% { opacity: 1; }
    }
    .typing-dots span {
      animation: dot-blink 1.4s infinite;
      animation-delay: calc(var(--i) * 0.2s);
    }
    #side-menu {
      transform: translateX(-100%);
      transition: transform 0.35s ease-in-out;
    }
    #side-menu.active {
      transform: translateX(0);
    }

    /* ðŸ’¬ Placeholder tengah */
    #chat-placeholder {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      color: #9ca3af;
      font-size: 0.95rem;
      opacity: 0.75;
      user-select: none;
      transition: opacity 0.3s ease;
    }
  </style>
</head>
<body class="bg-gray-900 text-gray-100 flex flex-col h-screen">

  <!-- Header -->
  <header class="bg-gray-800 text-white py-3 px-4 shadow-md flex items-center justify-center relative">
    <button id="menu-btn" class="absolute left-4 focus:outline-none">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>
    <h1 class="text-lg font-semibold text-center">ðŸ’¬ Customer Service</h1>
    <a href="index.html" class="absolute right-4 text-sm text-blue-400 hover:text-blue-300">Kembali</a>
  </header>

  <!-- Sidebar Menu -->
  <aside id="side-menu" class="fixed top-0 left-0 w-64 h-full bg-gray-800 text-gray-200 p-5 shadow-lg z-50">
    <h2 class="text-lg font-semibold mb-4"> Menu</h2>
    <ul class="space-y-3">
      <li><button id="new-chat" class="w-full text-left hover:text-blue-400">ðŸ†• Obrolan Baru</button></li>
    </ul>
  </aside>

  <!-- Overlay -->
  <div id="overlay" class="hidden fixed inset-0 bg-black bg-opacity-40 z-40"></div>

  <!-- Chat Container -->
  <main id="chat-container" class="flex-1 overflow-y-auto p-3 space-y-4 relative">
    <!-- Placeholder -->
    <div id="chat-placeholder">ðŸ’­ Mulai obrolan dengan Asisten Marcel...</div>
  </main>

  <!-- Input Chat -->
  <footer class="bg-gray-800 p-3 flex items-center space-x-2 border-t border-gray-700">
    <input 
      id="user-input" 
      type="text" 
      placeholder="Ketik pesan..." 
      class="flex-1 bg-gray-700 text-white p-3 rounded-xl outline-none focus:ring-2 focus:ring-blue-500"
    />
    <button 
      id="send-btn" 
      class="bg-blue-600 hover:bg-blue-500 px-4 py-3 rounded-xl font-medium">
      Kirim
    </button>
  </footer>

  <!-- Script -->
  <script>
    const chatContainer = document.getElementById("chat-container");
    const sendBtn = document.getElementById("send-btn");
    const userInput = document.getElementById("user-input");
    const menuBtn = document.getElementById("menu-btn");
    const sideMenu = document.getElementById("side-menu");
    const overlay = document.getElementById("overlay");
    const newChatBtn = document.getElementById("new-chat");

    sendBtn.addEventListener("click", sendMessage);
    userInput.addEventListener("keypress", e => {
      if (e.key === "Enter") sendMessage();
    });

    function sendMessage() {
      const text = userInput.value.trim();
      if (text === "") return;

      // Ambil ulang elemen placeholder (supaya tetap sinkron jika direset)
      const placeholder = document.getElementById("chat-placeholder");
      if (placeholder) placeholder.remove();

      const userMessage = document.createElement("div");
      userMessage.className = "flex items-start justify-end space-x-2";
      userMessage.innerHTML = `
        <div class='bg-blue-600 p-3 rounded-2xl rounded-tr-none max-w-[80%] sm:max-w-md'>
          <p>${text}</p>
        </div>
      `;
      chatContainer.appendChild(userMessage);
      userInput.value = "";
      scrollToBottom();

      showTypingAnimation();
      setTimeout(() => {
        removeTypingAnimation();
        showBotMessage("Terima kasih atas pesanmu! Fitur balasan otomatis akan segera hadir ðŸ¤–");
      }, 2000);
    }

    function showTypingAnimation() {
      const typingDiv = document.createElement("div");
      typingDiv.id = "typing";
      typingDiv.className = "flex items-start space-x-2";
      typingDiv.innerHTML = `
        <div class='bg-gray-700 p-3 rounded-2xl rounded-tl-none max-w-[60%] sm:max-w-md flex items-center space-x-1 typing-dots'>
          <span class="w-2 h-2 bg-gray-400 rounded-full inline-block" style="--i:1"></span>
          <span class="w-2 h-2 bg-gray-400 rounded-full inline-block" style="--i:2"></span>
          <span class="w-2 h-2 bg-gray-400 rounded-full inline-block" style="--i:3"></span>
        </div>
      `;
      chatContainer.appendChild(typingDiv);
      scrollToBottom();
    }

    function removeTypingAnimation() {
      const typingDiv = document.getElementById("typing");
      if (typingDiv) typingDiv.remove();
    }

    function showBotMessage(text) {
      const botMessage = document.createElement("div");
      botMessage.className = "flex items-start space-x-2";
      botMessage.innerHTML = `
        <div class='bg-gray-700 p-3 rounded-2xl rounded-tl-none max-w-[80%] sm:max-w-md'>
          <p>${text}</p>
        </div>
      `;
      chatContainer.appendChild(botMessage);
      scrollToBottom();
    }

    function scrollToBottom() {
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    // ðŸŒŸ Toggle Menu dengan animasi slide
    menuBtn.addEventListener("click", () => {
      sideMenu.classList.toggle("active");
      overlay.classList.toggle("hidden");
    });
    overlay.addEventListener("click", () => {
      sideMenu.classList.remove("active");
      overlay.classList.add("hidden");
    });

    // ðŸ†• Obrolan Baru
    newChatBtn.addEventListener("click", () => {
      chatContainer.innerHTML = `
        <div id="chat-placeholder">ðŸ’­ Mulai obrolan dengan Asisten Marcel...</div>
      `;
      sideMenu.classList.remove("active");
      overlay.classList.add("hidden");
    });

    // ðŸ”„ Saat halaman direfresh, pastikan placeholder tetap muncul
    window.addEventListener("load", () => {
      const placeholder = document.getElementById("chat-placeholder");
      if (placeholder) placeholder.style.display = "block";
    });
    backBtn.addEventListener("click", () => {
      window.location.href = "index.html";
    });

  </script>
</body>
</html>
