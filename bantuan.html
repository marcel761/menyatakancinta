<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bantuan</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      background-color: #fdf2f8;
      overflow: hidden;
      color: #1f2937;
    }

    header {
      background-color: #ec4899;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 20;
    }

    #chat-container {
      position: absolute;
      top: 56px; /* tinggi header */
      bottom: 70px; /* tinggi footer */
      left: 0;
      right: 0;
      overflow-y: auto;
      padding: 1rem;
      background-color: #fdf2f8;
      scroll-behavior: smooth;
      scrollbar-width: thin;
      scrollbar-color: #ec4899 #fdf2f8;
    }

    footer {
      background-color: #ec4899;
      border-top: 1px solid #f472b6;
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      box-shadow: 0 -4px 10px rgba(236, 72, 153, 0.25);
      z-index: 20;
    }

    #user-input {
      background-color: #fce7f3;
      color: #1f2937;
    }

    #send-btn {
      background-color: #db2777;
    }
    #send-btn:hover {
      background-color: #be185d;
    }

    .chat-bubble.bg-blue-600 { background-color: #db2777 !important; }
    .chat-bubble.bg-gray-700 { background-color: #f9a8d4 !important; color: #1f2937; }

    #chat-placeholder {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      color: #9ca3af;
      font-size: 0.95rem;
      opacity: 0.75;
      user-select: none;
      transition: opacity 0.3s ease;
    }

    #side-menu {
      transform: translateX(-100%);
      transition: transform 0.35s ease-in-out;
      background-color: #f9a8d4;
      color: #1f2937;
    }

    #side-menu.active { transform: translateX(0); }

    .chat-message { margin-bottom: 0.75rem; }
    .chat-bubble { max-width: 75%; border-radius: 1rem; }
    @media (min-width: 640px) { .chat-bubble { max-width: 60%; } }

    /* ðŸ’ž Efek konfeti cinta */
    .emoji {
      position: fixed;
      top: -2rem;
      font-size: 1.5rem;
      animation: fall linear forwards;
      z-index: 30;
      pointer-events: none;
      opacity: 0.9;
    }

    @keyframes fall {
      0% { transform: translateY(0) rotate(0deg); opacity: 1; }
      100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
    }
    /* ðŸŽ€ Toggle switch animasi lembut */
#romance-toggle:checked + div {
  background-color: #ec4899;
}

#romance-toggle:checked + div .dot {
  transform: translateX(1.25rem);
  transition: transform 0.3s cubic-bezier(0.4, 1.4, 0.4, 1);
}

  </style>
</head>

<body>
  <!-- Header -->
  <header class="text-white py-3 px-4 shadow-md flex items-center justify-center relative">
    <button id="menu-btn" class="absolute left-4 focus:outline-none">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>
    <h1 class="text-lg font-semibold text-center">ðŸ’¬ Customer Service</h1>
    <a href="index.html" class="absolute right-4 text-sm text-white hover:text-gray-200">Kembali</a>
  </header>

  <!-- Sidebar Menu -->
  <aside id="side-menu" class="fixed top-0 left-0 w-64 h-full p-5 shadow-lg z-50">
    <h2 class="text-lg font-semibold mb-4">Menu</h2>
    <ul class="space-y-3">
      <li><button id="new-chat" class="w-full text-left hover:text-pink-700">ðŸ†• Obrolan Baru</button></li>
    </ul>

    <!-- ðŸ’– Romance Mode -->
    <div class="absolute bottom-6 left-0 w-full px-5">
      <hr class="border-pink-400 mb-3">
      <div class="flex items-center justify-between">
        <span>ðŸ’– Romance Mode</span>
        <label class="inline-flex items-center cursor-pointer">
          <input type="checkbox" id="romance-toggle" class="sr-only peer">
          <div class="w-11 h-6 bg-gray-300 rounded-full peer peer-checked:bg-pink-500 relative transition">
            <div class="dot absolute top-[2px] left-[2px] bg-white w-5 h-5 rounded-full transition-transform peer-checked:translate-x-full"></div>
          </div>
        </label>
      </div>
    </div>
  </aside>

  <div id="overlay" class="hidden fixed inset-0 bg-black bg-opacity-40 z-40"></div>

  <!-- Chat -->
  <main id="chat-container">
    <div id="chat-placeholder">ðŸ’­ Mulai obrolan dengan Asisten Marcel...</div>
  </main>

  <!-- Input -->
  <footer class="flex items-center space-x-2 p-3">
    <input id="user-input" type="text" placeholder="Ketik pesan..." class="flex-1 p-3 rounded-xl outline-none focus:ring-2 focus:ring-pink-400" />
    <button id="send-btn" class="hover:bg-pink-700 px-4 py-3 rounded-xl font-medium text-white">Kirim</button>
  </footer>

  <script>
    const botAvatar = "robot.png";   // ganti dengan path gambar bot kamu
    const userAvatar = "user.png"; // ganti dengan path gambar user kamu
    const chatContainer = document.getElementById("chat-container");
    const sendBtn = document.getElementById("send-btn");
    const userInput = document.getElementById("user-input");
    const menuBtn = document.getElementById("menu-btn");
    const sideMenu = document.getElementById("side-menu");
    const overlay = document.getElementById("overlay");
    const newChatBtn = document.getElementById("new-chat");
    const romanceToggle = document.getElementById("romance-toggle");

    sendBtn.addEventListener("click", sendMessage);
    userInput.addEventListener("keypress", e => { if (e.key === "Enter") sendMessage(); });

    function sendMessage() {
      const text = userInput.value.trim();
      if (text === "") return;
      const placeholder = document.getElementById("chat-placeholder");
      if (placeholder) placeholder.remove();

      const userMessage = document.createElement("div");
      userMessage.className = "flex justify-end items-start chat-message space-x-2";
      userMessage.innerHTML = `
       <div class='chat-bubble bg-blue-600 p-3 rounded-2xl rounded-tr-none'>
     <p>${text}</p>
     </div>
   <img src="${userAvatar}" alt="User" class="w-8 h-8 rounded-full self-end">
    `;
     chatContainer.appendChild(userMessage);
      userInput.value = "";
      scrollToBottom();

      showTypingAnimation();
      setTimeout(() => {
        removeTypingAnimation();
        showBotMessage("Terima kasih atas pesanmu! Fitur balasan otomatis akan segera hadir ðŸ¤–");
      }, 2000);
    }

    function showTypingAnimation() {
      const typingDiv = document.createElement("div");
      typingDiv.id = "typing";
      typingDiv.className = "flex items-start chat-message";
      typingDiv.innerHTML = `<div class='chat-bubble bg-gray-700 p-3 rounded-2xl rounded-tl-none flex items-center space-x-1 typing-dots'>
        <span class="w-2 h-2 bg-gray-400 rounded-full inline-block"></span>
        <span class="w-2 h-2 bg-gray-400 rounded-full inline-block"></span>
        <span class="w-2 h-2 bg-gray-400 rounded-full inline-block"></span></div>`;
      chatContainer.appendChild(typingDiv);
      scrollToBottom();
    }

    function removeTypingAnimation() {
      const typingDiv = document.getElementById("typing");
      if (typingDiv) typingDiv.remove();
    }

    function showBotMessage(text) {
      const botMessage = document.createElement("div");
      botMessage.className = "flex items-start chat-message space-x-2";
      botMessage.innerHTML = `
      <img src="${botAvatar}" alt="Bot" class="w-8 h-8 rounded-full self-end">
      <div class='chat-bubble bg-gray-700 p-3 rounded-2xl rounded-tl-none'>
       <p>${text}</p>
      </div>
      `;
     chatContainer.appendChild(botMessage);
      scrollToBottom();
    }

    function scrollToBottom() { chatContainer.scrollTop = chatContainer.scrollHeight; }

    menuBtn.addEventListener("click", () => {
      sideMenu.classList.toggle("active");
      overlay.classList.toggle("hidden");
    });
    overlay.addEventListener("click", () => {
      sideMenu.classList.remove("active");
      overlay.classList.add("hidden");
    });

    newChatBtn.addEventListener("click", () => {
      chatContainer.innerHTML = `<div id="chat-placeholder">ðŸ’­ Mulai obrolan dengan Asisten Marcel...</div>`;
      sideMenu.classList.remove("active");
      overlay.classList.add("hidden");
    });

    window.addEventListener("load", () => {
      const isOn = localStorage.getItem("romanceMode") === "true";
      romanceToggle.checked = isOn;
      if (isOn) startRomance();
    });

    romanceToggle.addEventListener("change", () => {
      const isOn = romanceToggle.checked;
      localStorage.setItem("romanceMode", isOn);
      if (isOn) startRomance();
    });

    function startRomance() {
      const emojis = ["ðŸ’–", "ðŸ’˜", "ðŸ’•", "ðŸ’ž", "ðŸ’«", "âœ¨", "ðŸŒ¸", "ðŸ’“"];
      const interval = setInterval(() => {
        if (!romanceToggle.checked) return clearInterval(interval);
        const emoji = document.createElement("div");
        emoji.className = "emoji";
        emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
        emoji.style.left = Math.random() * 100 + "vw";
        emoji.style.animationDuration = (3 + Math.random() * 3) + "s";
        document.body.appendChild(emoji);
        setTimeout(() => emoji.remove(), 6000);
      }, 150);
    }
  </script>
</body>
</html>
